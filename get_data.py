import requests
from bs4 import BeautifulSoup
url='https://list.tmall.com/search_product.htm?spm=a220m.1000858.1000724.1.VUo4At&q=%CF%B4%B7%A2%CB%AE&sort=s&style=g&from=mallfp..pc_1_suggest&suggest=0_1&smAreaId=440100#J_Filter'
headers = {
    'User-Agent':'Baiduspider',
    'Cookie':'cna=fYnhDy048m0CAd4QNGuCyl5W; sca=4b884cec; cnaui=2661516991; aimx=WnfkDyL6UGECAd4QNGvU49VW_1467434063; tbsa=e0b6f2bdff87bb947115ada5_1467434144_2; aui=2661516991; atpsida=5f3bf08a1d340f3ce8a9add7_1467434156'
}

def get_pages(url):
    urls = []
    wb_data = requests.get(url,headers = headers)
    soup = BeautifulSoup(wb_data.text,'lxml')
    herf_set = soup.select('div.productImg-wrap a.productImg')
    #print(herf_set)
    for each in herf_set:
        #print(each.get('href'))
        urls.append(each.get('href'))
    #print(urls)
    return(urls[:10])

'''a = get_pages(url)
url_2 = 'https:'+a[0]
print(url_2)'''


import requests
import json
import re
from random import choice
import time
#list_detail_rate.htm?从network中找到所需评论所在的地址
url_3 = 'https://rate.tmall.com/list_detail_rate.htm?itemId=39451855306&spuId=344387786&sellerId=700459267&order=3&currentPage=1&append=0&content=1&tagId=&posi=&picture=&ua=090UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNNeUB%2BRnhGciQ%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZFpuV2lRb1FlUm9NdU15RHhMd096T3JHeUBuOA%3D%3D%7CVWldfS0QMAoxBSUbOxUtEzkXQRc%3D%7CVmhIGCUFOBgkGyAePgI9CTIKKhYpHCEBNAk0FCgXIh8%2FBT4DVQM%3D%7CV29PHzEfP29RZVp6TnBNbVNsVHZOblBvW3tHeEZmWmM1FSoKJAoqFCsVK30r%7CWGFBET9%2FK2MYcRd7ME0wS2VFcEx3V2tWa19%2FRXFPey17%7CWWBAED4QMAQ8AyMXLhU1AD8COW85%7CWmNDEz19KWEacxV5Mk8ySWdHf0N%2BXmJfYl5%2BQn1CekMVQw%3D%3D%7CW2JCEjwSMgowDCwTKBYjAz8EPAYyZDI%3D%7CXGVFFTsVNQ0yBycbJR0mBjkGOgY4bjg%3D%7CXWREFDp6LnAUSytXMlh2Vm9Xa0txRXlZZlNoVWs9aw%3D%3D%7CXmdHFzkXNwkxCSkcKRIyDTgNNA1bDQ%3D%3D%7CX2dHFzkXN2dZYF9%2FS3VIaFdiVnZPcERkWGdZeUV8Kgo3FzkXNwg8AzkEUgQ%3D%7CQHlZCScJKRcsFzcDPQYmGCUeIxlPGQ%3D%3D%7CQXhYCCYIKBEtEzMHPQcnGSUYLBhOGA%3D%3D%7CQntbCyULKxIsETEIPQU%2BHiAYJB4mcCY%3D%7CQ3tbCyULK3tEcE5uV25VbjgYJQUrBSUbLxQoHUsd%7CRHxcDCIMLHxGfEVlXGJaZUV7Q3dXb1FqSnROblBkMhIvDyEPLxYpFyMfSR8%3D%7CRXxBfFxhQX5eYltnR3lBe1tiQn5Kal5%2BS2tRcUpqUnJLa1V1SXVVaUl0VHVJaVNzSB4%3D&isg=AhUVQNi47iNaG8reJAsYp68EJBHR3skktsnR1Je7PQxC7jfgX2OP9Y3szkUi&needFold=0&_ksTS=1467439477904_2860&callback=jsonp2861'
url_set_1 =['https://rate.tmall.com/list_detail_rate.htm?itemId=39451855306&spuId=344387786&sellerId=700459267&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=090UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNNeUB%2BRnhGciQ%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZFpuV2lRb1FlUm9NdU15RHhMd096T3JHeUBuOA%3D%3D%7CVWldfS0QMAoxBSUbOxUtEzkXQRc%3D%7CVmhIGCUFOBgkGyAePgI9CTIKKhYpHCEBNAk0FCgXIh8%2FBT4DVQM%3D%7CV29PHzEfP29RZVp6TnBNbVNsVHZOblBvW3tHeEZmWmM1FSoKJAoqFCsVK30r%7CWGFBET9%2FK2MYcRd7ME0wS2VFcEx3V2tWa19%2FRXFPey17%7CWWBAED4QMAQ8AyMXLhU1AD8COW85%7CWmNDEz19KWEacxV5Mk8ySWdHf0N%2BXmJfYl5%2BQn1CekMVQw%3D%3D%7CW2JCEjwSMgowDCwTKBYjAz8EPAYyZDI%3D%7CXGVFFTsVNQ0yBycbJR0mBjkGOgY4bjg%3D%7CXWREFDp6LnAUSytXMlh2Vm9Xa0txRXlZZlNoVWs9aw%3D%3D%7CXmdHFzkXNwkxCSkcKRIyDTgNNA1bDQ%3D%3D%7CX2dHFzkXN2dZYF9%2FS3VIaFdiVnZPcERkWGdZeUV8Kgo3FzkXNwg8AzkEUgQ%3D%7CQHlZCScJKRcsFzcDPQYmGCUeIxlPGQ%3D%3D%7CQXhYCCYIKBEtEzMHPQcnGSUYLBhOGA%3D%3D%7CQntbCyULKxIsETEIPQU%2BHiAYJB4mcCY%3D%7CQ3tbCyULK3tEcE5uV25VbjgYJQUrBSUbLxQoHUsd%7CRHxcDCIMLHxGfEVlXGJaZUV7Q3dXb1FqSnROblBkMhIvDyEPLxYpFyMfSR8%3D%7CRXxBfFxhQX5eYltnR3lBe1tiQn5Kal5%2BS2tRcUpqUnJLa1V1SXVVaUl0VHVJaVNzSB4%3D&isg=AhUVQNi47iNaG8reJAsYp68EJBHR3skktsnR1Je7PQxC7jfgX2OP9Y3szkUi&needFold=0&_ksTS=1467439477904_2860&callback=jsonp2861'
         .format(str(i)) for i in range(1,100)]
url_set_2 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=522027639218&spuId=384742734&sellerId=217101303&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=201UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNLdEhzRnlMcyU%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZFxjX2RRbltnUG1Pe0RxTHhHe0N8SHFEekJ4R2k%2F%7CVWldfS0SMg0xDS0UNBprGCgYNmA2%7CVmhIGCUFOBgkGCwRMQk0DTQUKBciHz8KNwoqFikcIQE7AD1rPQ%3D%3D%7CV25OHjAePgYzBycbIx8nBzkBPgY%2BaD4%3D%7CWGFBET8RMQ40DS0TKhQpCTAJNwwxZzE%3D%7CWWFBET8RMWFfZF5%2BQHlBdSMDPh4wHj4HPwoyDlgO%7CWmJCEjwSMmJZYlt7RXxHfSsLNhY4FjYPNAE1AVcB%7CW2JCEjwSMgg9ACAeKhIoCDEEMQU5bzk%3D%7CXGVFFTsVNQ81CioTJhMoCDAMMAk9az0%3D%7CXWREFDoUNA41Dy8WIx8lBT0BOwM%2FaT8%3D%7CXmZGFjgWNmZcZ119RHFNcVFoVmtLdUB0VGpQcE56LAwxET8RMQk1AT0FUwU%3D%7CX2ZbZkZ7W2REeEF9XWNbYUF4WGRZeU1tUWtLd0xsV3dPb1Z2SnUj&isg=AgIC-QAP4apjTf13X-oH_rSVUwjhGQbtndiGvUwYeHUvn6AZNGNW_YiFOSwZ&needFold=0&_ksTS=1467452220378_2397&callback=jsonp2398'.format(str(i)) for i in range(1,100)]
url_set_3 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=37466467910&spuId=292820100&sellerId=1975427752&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=039UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdU9yS3NKdyE%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9iWGVcZF1gV2pIdE5zTXBEfEl2TnBIcUp0QG44%7CVWldfS0RMQsyDi4SKwslQydAKmhDY1x8Q2YwYAUrfSs%3D%7CVmhIGCUFOBgkGyAePgA6Az0dIR4rFjYDPgMjHyAVKAgyCTRiNA%3D%3D%7CV25OHjAePgY5BiYaJh4qCjUINQE7bTs%3D%7CWGBAED4QMGBealFxTXJNdVVrVGxOdlZvUGxMcE5zU29WACAfPxE%2FHyAcJRwidCI%3D%7CWWBAED4QMAo2CSkVKRIuDjEINwM9az0%3D%7CWmNDEz1WMVcqRyFcclJrVGBAfEB0SmpVYFpuWw1b%7CW2NDEz0TM2NdZFh4RHtFeFhnUmZGf0B8XGBeY0N%2FRhAwDS0DLQ0yBjMPMGYw%7CXGVYZUV4WGdHe0J%2BXmBYYkJ7W2daekZzU2ZGfFxgWA4%3D&isg=Av39iH9rdmsHAdKGDJPwnxc8DFmusDHsHsHpbL9CjNSS9hwoh-sUvWXk1p1K&needFold=0&_ksTS=1467460736914_2408&callback=jsonp2409'.format(str(i)) for i in range(1,100)]
url_set_4 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=526934723097&spuId=507749101&sellerId=700459267&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=163UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdEl2SHFMeC4%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jXmFfZltvWGVHfkVwSXNMcU5yT3BIc09xRWs9%7CVWldfS0SMg04ASEdKAgmV2kHOUxxTXNMcld%2BRXteewl0Wgxa%7CVmhIGCUFOBgkGyAePgI9BTgDIx8gFSgIPQA9HSEeKxY2DDcKXAo%3D%7CV29PHzEfP29Ra1FxRXtFEzMOLgAuDjAKMAxaDA%3D%3D%7CWGFBET8RMQg9CSkVLBEsDDIIMw80YjQ%3D%7CWWBAED4QMAg8AyMaJhwoCDEINgoxZzE%3D%7CWmNDEz0TMwswBSUcJRwkBD0EMA04bjg%3D%7CW2JCEjwSMgk1DCwVLhMoCDEJMw86bDo%3D%7CXGVFFTsVNQwzCysSKBIqCjMINQs1YzU%3D%7CXWREFDoUNA0xCSkQKhIrCzIINQE0YjQ%3D%7CXmZGFjgWNmZYYlp6Q3ZOcCYGOxs1GzsCNw05AVcB%7CX2ZGFjgWNgw0ACAZLBUoCDEFMQ03YTc%3D%7CQHlZCSdnM2wOUjtGK1A%2BVzNXeVljWWdHfkZ%2BRGRcYV1oVQNV%7CQXlZCScJKXlDdktrUmpWbk52SndXaVRhQX9FZVtvORkkBCoEJBwhGiURRxE%3D%7CQntGe1tmRnlZZVxgQH5GfFxlRXlNbVl5TGxWdk1tVXVMbFBvT3BQbEx4Lg%3D%3D&isg=ArOzZpF94C1cZaz4duGmmR0OQrcQkUeqJHP3cmVQc1IhZNEG7bmu-i2-aCNw&needFold=0&_ksTS=1467461074223_3136&callback=jsonp3137'.format(str(i)) for i in range(1,100)]
url_set_5 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=526427975861&spuId=473874996&sellerId=2257664259&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=032UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdEh9Q3ZMcCY%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jX2pUYVtnUG1Pe09wRXtOcE1xSXJKdUB4RGo8%7CVWldfS0SMg00DCwQKwslHTgOegVsFztBeUltSXQFPBJEEg%3D%3D%7CVmhIGCUFOBgkGyAePgc8Az0dIR4rFjYDPgMjHyAVKAgyCTRiNA%3D%3D%7CV29PHzEfP29RZV19QXxAe1tlWmNBeVllUWtLd0lyUmtRBycYOBY4GCcfIRxKHA%3D%3D%7CWGFBET8RMQkyCCgUKB0gADkBOAJUAg%3D%3D%7CWWBAED4QMAo%2BAiIeIh0jAzoAOA1bDQ%3D%3D%7CWmNDEz0TMwsyBiYaJh0mBjoCOwA4bjg%3D%7CW2JCEjx8KHcedDxVLgAgGyQbOwc6BTgYJBwmEiZwJg%3D%3D%7CXGVFFTsVNQ00Di4SLhUsDDAKMw43YTc%3D%7CXWREFDoUNA80Di4SLhcuDjIIMwg1YzU%3D%7CXmdHFzkXNw83AiIeIhggAD8DOQwzZTM%3D%7CX2ZGFjgWNg4yDS0RLhMuDjEONQ05bzk%3D%7CQHlZCScJKRIqEzMPMwsyEi0TLhArfSs%3D%7CQXhYCCYIKBElEDAMMwo2FikTJhwncSc%3D%7CQnpaCiQKKnpDfkJiXGRfYjQUKQknCSkXLxMnHUsd%7CQ3tbCyULK3tBe0ZmWGZTbEx0SHdXblVtTXNJaVdjNRUoCCYIKBYtFiIYThg%3D%7CRH1AfV1gQH9fY1pmRnhAelpjQ39La19%2FSmpQcEtrU3NKalR0S2tXd0pqX39FEw%3D%3D&isg=AgUFcH44_vPdE9qv2S9UoWI5FEF277lUJnnhBAdqwTxLniUQzxLJJJN93nWS&needFold=0&_ksTS=1467461220746_1026&callback=jsonp1027&isg=ArCw9mOjk8TIqU_A9MRJNlcigX5L1O8Pk9KU66oCM4v3ZVMPUgt00uQTy9r_&isg2=AnV1LgjWKSJDQtiHG-Z2awUaBfssvSkt&isg=AtHRFgqkYpfxBo6DjSNYhf594N0iE2KGyr2VaLNlghieWvKs-4xFgZ38iplG'.format(str(i)) for i in range(1,100)]
url_set_6 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=9180531789&spuId=275074302&sellerId=667181444&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=115UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdEpyTXJNdiA%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jXWVaZVphVmtJd093SXVBeU13THlMd0l9RGo8%7CVWldfS0SMg40Di4bOxUlATxNcx0jCiRyJA%3D%3D%7CVmhIGCUFOBgkGyAePgA6Az0dIR4rFjYDPgMjHyAVKAgyCTRiNA%3D%3D%7CV29PHzEfP29WalJyTnFPcyUFOho0GjoPNAgyZDI%3D%7CWGFBET8RMQozCysXKBwiAj4CPwA6bDo%3D%7CWWBAED4QMAk3Dy8TLxYqCjYKNQA9az0%3D%7CWmNDEz0TMwozBiYaJR0lBTkBOAQ5bzk%3D%7CW2JCEjwSMgw3Dy8TLBMnBzsONgoyZDI%3D%7CXGREFDoUNGRaYVx8QH9AdVVqX2tLdEt3V2tVb09zShw8ASEPIQE9CD0DPGo8%7CXWRZZER5WWZGekN%2FX2FZY0N6WmZSckZmU3NJaVJyTnch&isg=AmdnStwy_AkrDXiECmUqPenC9psbRTvOsM_D7jnUTPYUKIbqQb2jHkFqPJ9M&needFold=0&_ksTS=1467461375697_3238&callback=jsonp3239'.format(str(i)) for i in range(1,100)]
url_set_7 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=15871340952&spuId=268742133&sellerId=808734231&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=188UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdE14Qn9Efig%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jWm9VaFNpXmNBekRxTHNPckd5RH9LckxySGYw%7CVWldfS0TMw04DCwVNRsmV25TfSt9%7CVmhIGCUFOBgkGyAePgc6BTAQLBMmGzsOMw4uEi0YJQU%2FBDlvOQ%3D%3D%7CV29PHzEfP29RZVl5RXpFeVlnWGFDe1tkWWFBfUN4WGFbDS0SMhwyEi4XIhhOGA%3D%3D%7CWGFBET8RMQQ8ACAcIxkgADgGMw5YDg%3D%3D%7CWWBAED4QMAgwCSkVLBElBTkEPgswZjA%3D%7CWmNDEz0TMws%2BBycbJREqCjYKMw81YzU%3D%7CW2JCEjxHLlM%2BQypFekV5TRkiHSBJZ0d8QntbZ1hiXHxAf0Z%2BQRdB%7CXGVFFTsVNQw2Di4WKR0gAD8DOgA7bTs%3D%7CXWREFDoUNAo%2FCysTKhYiAj0BOg40YjQ%3D%7CXmdHFzkXNwgyDy8XLhYtDTIOOgY9az0%3D%7CX2dHFzkXN2dYbFR0THVOdiAAPR0zHT0CPAYzDlgO%7CQHhYCCYIKHhGek5uVm9UYDYWKwslCysULRYqEEYQ%7CQXhYCCYIKBIrFTUNMgo0FCsQLRApfyk%3D%7CQnpaCiQKKnpAekZmXmFeZER8QHRUbVFtTXNJaVdjNRUoCCYIKBcsFyofSR8%3D%7CQ3pHelpnR3hYZF1hQX9HfV1kRHhMbFh4TW1Xd0xsVHRNbVNzT3NTb1JyT29aDA%3D%3D&isg=Atvb7vO0CBV2hHRgnin-kQVGaj9VCO-yzMvPys0YrVr1rPmOVYB_Avk-MLvY&needFold=0&_ksTS=1467461513824_2564&callback=jsonp2565'.format(str(i)) for i in range(1,100)]
url_set_8 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=524011612556&spuId=421593039&sellerId=217101303&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=196UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdE9zTXNMcSc%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jWGRaZFtmUWxOcU9xSXxDfEB4RH9GfEZySmQy%7CVWldfS0RMQ0yCj8fIx8%2FEWgVJUQjFWEAbkonCV8J%7CVmhIGCUFOBgkGyAePgY7Bz8fIxwpFDQBPAEhHSIXKgowCzZgNg%3D%3D%7CV25OHjBwJHsZRSxRPEcpQCRAbk50S3NTb1ZiW3tAeEEXQQ%3D%3D%7CWGFBET8RMQg0DCwQKRYtDTIKMAxaDA%3D%3D%7CWWBAED4QMA43CioWLxItDTIHPARSBA%3D%3D%7CWmNDEz0TMw01DS0RKBMvDzENNgheCA%3D%3D%7CW2JCEjwSMgswDCwQKR0pCTcJMw9ZDw%3D%3D%7CXGVFFTsVNQ0wDCwQKRwoCDEMNgpcCg%3D%3D%7CXWREFDoUNAw2Di4SKxIoCDEINwlfCQ%3D%3D%7CXmdHFzkXNwwxDi4SKxQhAToHMw9ZDw%3D%3D%7CX2ZGFjgWNg43DS0RKBwjAzgBPQdRBw%3D%3D%7CQHlZCScJKRAsFDQINw4wECseJBpMGg%3D%3D%7CQXlZCScJKXlAfEVlWWZYZzERLg4gDi4UKxYqfCo%3D%7CQnpaCiQKKnpEeEVlXGZdZTMTLg4gDi4QJB4hFEIU%7CQ3tbCyULK3tBe0VlXGdbbk53Q3paY1djQ31HZ1ltOxsmBigGJh8jHCQQRhA%3D%7CRH1AfV1gQH9fY1pmRnhAelpjQ39CYlZ2Q2NZeUJiWnpDY119QmJefkpqX39FEw%3D%3D&isg=AqKiGS3jAYoniB1XP8qnHhS18yjHRqYNffjmnew7cZXIv0A51IP2HSgtmUy5&needFold=0&_ksTS=1467461654756_2088&callback=jsonp2089'.format(str(i)) for i in range(1,100)]
url_set_9 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=526575360467&spuId=474978111&sellerId=1943402959&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=109UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdE53TXVNdiA%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jWWBaYlphVmtJdE90SXRAeEB%2BR3JIcUV%2BQXpUAg%3D%3D%7CVWldfS0RMQs3CioUNBo%2BFXFfCV8%3D%7CVmhIGCUFOBgkGyAePgA1ADkZJRovEjIHOgcnGyQRLAw2DTBmMA%3D%3D%7CV25OHjAePgYyDy8TKhMpCTcLMwdRBw%3D%3D%7CWGFBET8RMQo3Di4SKxUsDDUNNgJUAg%3D%3D%7CWWBAED4QMAk8BCQYIR8lBTwGMwtdCw%3D%3D%7CWmNDEz0TMwowDCwQKRYjAzsDNg5YDg%3D%3D%7CW2NDEz0TM2Nab1NzT3ZJdiAAPR0zHT0HMgcyZDI%3D%7CXGVFFTsVNQ0yDi4SKxInBzsGMwc4bjg%3D%7CXWVFFTsVNWVdY1x8QHlBey0NMBA%2BEDAMNQoxClwK%7CXmdHFzkXNw8wCioWLxQpCTUBPgA%2BaD4%3D%7CX2ZGFjgWNg4xDCwQKRcsDDAEMA41YzU%3D%7CQHlZCScJKRAkGjoGPwc5GSYaIh8ncSc%3D%7CQXhYCCYIKBMnEjIONww2FikXKBQhdyE%3D%7CQntbCyULKxEuGjoGPwQ4GCcZLBUseiw%3D%7CQ3tbCyULK3tCfkNjX2BfZDISLQ0jDS0SKBcsF0EX%7CRHxcDCIMLHxDdkJiWmVeajwcIQEvASEYIBwgFEIU%7CRX1dDSMNLX1HfUhoUGxUYUF5QndXb1FqSnROblBkMhIvDyEPLxYtFywSRBI%3D%7CRn9Cf19iQn1dYVhkRHpCeFhhQX1AYFR0QWFbe0d%2FX2dHe0VlW3tEZFh4RWVEeFhiQnlZYTc%3D&isg=AiIimS_dgQq4kp3Xv0onnpQ1c6iWnyaN_XhmHWy7BhVHP8G5VAN2naitGcw5&needFold=0&_ksTS=1467461794496_1100&callback=jsonp1101'.format(str(i)) for i in range(100,200)]
url_set_10 = ['https://rate.tmall.com/list_detail_rate.htm?itemId=17327498343&spuId=133925270&sellerId=1129326215&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=145UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwSnNIdEF1S3BJdyE%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGddZF9jVmJcZ15gV2pIcU53S3dKfkJ4QXRPc053QnpUAg%3D%3D%7CVWldfS0RMQ02AjYWKhExHzoTKx86H20SewAsUiEdLX1TBVM%3D%7CVmhIGCUFOBgkGyAePgE8CDYWKhUgHT0INQgoFCseIwM5Aj9pPw%3D%3D%7CV25OHjAePgU6Dy8RKR0gADkCNwpcCg%3D%3D%7CWGFBET8RMQowDi4QKxEqCjINMQ5YDg%3D%3D%7CWWBAED4QMAk8AyMdKRUuDjYONQtdCw%3D%3D%7CWmNDEz0TMww2CysVIRgiAjoOMgxaDA%3D%3D%7CW2NDEz0TM2NcaFJyTHhDey0NMBA%2BEDALMQw5bzk%3D%7CXGREFDoUNGRaZVBwTnpBfykJNBQ6FDQOOgI2YDY%3D%7CXWVFFTsVNWVcYV9%2FQXVOdCICPx8xHz8LPwo0YjQ%3D%7CXmdHFzkXNw00CSkXLBYiAj4CPAQ6bDo%3D%7CX2dHFzkXN2ddZ1x8QnlBdFRtWGxMckx3V2lTc015Lw8yEjwSMg4yCD0BVwE%3D%7CQHlEeVlkRHtbZ15iQnxEfl5nR3tGZlJyR2ddfUF5WWVcfEB%2BXmBAfEAW&isg=Ah8fIjDZtKHMD7C8gv3yZeHqrnNbD3MmqNcLtrFsVk4EQD3CuVQDdp1CdGfE&_ksTS=1467461905586_1121&callback=jsonp1122'.format(str(i)) for i in range(1,200)]







def get_text(url_set):
    result = []
    for url in url_set:
        cont=requests.get(url,headers = headers).content.decode('gbk')
        time.sleep(choice([1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4]))
        rex=re.compile(r'\w+[(]{1}(.*)[)]{1}')
        content=rex.findall(cont)[0]
        con=json.loads(content,"gbk")
        #print(con)
        count=len(con['rateDetail']['rateList'])
        #print(count)
        for i in range(count):
            result.append(con['rateDetail']['rateList'][i]['rateContent'])
            print (con['rateDetail']['rateList'][i]['rateContent'])
    return result

import random
url_set = ['https://rate.tmall.com/list_detail_rate.htm?itemId=43869387453&spuId=250777155&sellerId=1744401399&order=3&currentPage={}&append=0&content=1&tagId=&posi=&picture=&ua=097UW5TcyMNYQwiAiwQRHhBfEF8QXtHcklnMWc%3D%7CUm5OcktwRH9FeUR%2FS3VLdSM%3D%7CU2xMHDJ7G2AHYg8hAS8XKwUlC1c2UDxbJV9xJ3E%3D%7CVGhXd1llXGdTaFJuU2hcYlxjVGlLd0lwRHhHeUR5QnlEcU92Q3xSBA%3D%3D%7CVWldfS0TMw8xDzQUKBQ0Gj8JYgtxHDgcIVBuQBZA%7CVmhIGCUFOBgkGCwRMQowDzERLRMoEzMJMgcnGyUeJQU%2FADVjNQ%3D%3D%7CV25OHjAePgs3Di4SLxcpCTEEOgU%2FAVcB%7CWGFBET8RMQs%2BCysXLhsmBj4LMgc4AFYA%7CWWBAED4QMAwxCD0dIRgsEjIJMgo%2BCzNlMw%3D%3D%7CWmNDEz0TMwg9BiYaIR4qCjELNA00CF4I%7CW2JCEjwSMg4zDzQUKBApHDwHPQkxDzZgNg%3D%3D%7CXGVFFTsVNQ82CioWLRQpCTIHOgU4BFIE%7CXWREFDp6LnEYcjpTKAYmEioSMg4zDDYWKhMpEC4SKnwq%7CXmdHFzkXNw87BSUZJBAuDjILMQQ7AD1rPQ%3D%3D%7CX2ZGFjgWNgwzBiYaIhcpCTUOMwYzDzpsOg%3D%3D%7CQHlZCScJKRUoFSoKNggyDy8QJR4hGi8TRRM%3D%7CQXlZCSdMK00wXTtGaEgYIhkiAjYKNmBAf19xX39GekR6Q31DFUM%3D%7CQnpaCiQKKnpEf0FhX2pTbDoaJwcpByceIhskGCQaTBo%3D%7CQ3tbCyULK3tBdUFhX2NcaEhxSHZWaFxhQ39KcEhoVmxMckYQMA0tAy0NNAgxCDIIPGo8%7CRH1AfV1gQH9fY1pmRnhAelpjQ39CYlZ2Q2NZeUJiWnpDY119QmJefkpqX39FEw%3D%3D&isg=AmFhXNmdkqke-T7LATdwYhDLcC0hHNUAQKEMJ8M2KmjbKoH8C17l0I9q-ulW&needFold=0&_ksTS=1469675214255_1469&callback=jsonp1470'.format(str(i)) for i in range(100)]
#random.shuffle(url_set)
a = get_text(url_set)
print(len(a))
'''import csv
file =r'E:\mydata\pacon\output_9.csv'
csvfile = open(file, 'w')
writer=csv.writer(csvfile,lineterminator='\n')
for i in range(len(a)):
    writer.writerow((i,a[i]))'''








